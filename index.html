<html>
<head>
<title></title>
<meta http-equiv="content-type" content="text/html; charset=utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<style>
#stage { width:220px; height: 330px; border-left: 1px solid black; border-top: 1px solid black;}
.box { width:10px; height:10px; border-right: 1px solid black; border-bottom: 1px solid black; float: left; }
</style>
</head>
<body>
<div id="stage"></div>
<script>
var map = [20, 30];
var color = {
  'on': 'green',
  'off': '',
  'over': 'red'
};
    
var stage = document.getElementById("stage");
var box = document.createElement("div");
box.className = 'box';

var _;
for (x = 0; x < map[0]; x++) {
  for (y = 0; y < map[1]; y++) {
    _ = box.cloneNode();
    _.addEventListener('mouseover', function(e) {
      if (this.style.backgroundColor === color.off) {
        this.style.backgroundColor = color.over;
      }
    });
    _.addEventListener('mouseout', function(e) {
      if (this.style.backgroundColor === color.over) {
        this.style.backgroundColor = color.off;
      }
    });    
    _.addEventListener('click', function(e) {
      if (this.style.backgroundColor === color.on) {
        this.style.backgroundColor = color.off;
      } else {
        this.style.backgroundColor = color.on;
      }
    });
    stage.appendChild(_);
  }
}
</script>
</body>
</html>